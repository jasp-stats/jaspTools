% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/test-generator.R
\name{extractDatasetFromJASPfile}
\alias{extractDatasetFromJASPfile}
\title{Extract dataset from a JASP file}
\usage{
extractDatasetFromJASPfile(file, exportDir = NULL)
}
\arguments{
\item{file}{String path to a .jasp file.}

\item{exportDir}{Optional string path to a directory. If provided, the dataset will be saved as a CSV file
in this directory and the path to the CSV will be returned. If NULL (default), returns a data.frame directly.}
}
\value{
If \code{exportDir} is NULL, returns a data.frame with the extracted dataset.
If \code{exportDir} is provided, returns the file path to the exported CSV file.
}
\description{
\code{extractDatasetFromJASPfile} extracts the data.frame from a JASP file's internal SQLite database,
properly handling factor columns with their labels.
}
\details{
This function extracts the dataset stored in a JASP file by:
\itemize{
\item Unpacking the .jasp archive (which is a zip file)
\item Reading the internal.sqlite database
\item Converting Column_N_DBL and Column_N_INT columns to properly named columns
\item Mapping factor levels from the Labels table to create proper R factors
\item Handling both explicitly nominal columns and columns with label mappings
}

Factor columns are automatically detected by checking if:
\itemize{
\item The column is marked as "nominal" in the Columns table, OR
\item The column has labels defined in the Labels table AND the _DBL column contains only "nan" values
}

\strong{Prerequisites:}
\itemize{
\item Packages 'DBI' and 'RSQLite' are required and will be loaded automatically
\item Package 'archive' is required for extracting the .jasp file
}
}
\examples{
\dontrun{
# Extract as data.frame
dataset <- extractDatasetFromJASPfile("path/to/file.jasp")
str(dataset)

# Export to CSV
csvPath <- extractDatasetFromJASPfile("path/to/file.jasp", exportDir = "output")
}

}
